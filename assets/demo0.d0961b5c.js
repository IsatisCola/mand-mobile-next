var e=Object.defineProperty,n=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(n,t,a)=>t in n?e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,s=(e,n)=>{for(var t in n||(n={}))o.call(n,t)&&i(e,t,n[t]);if(a)for(var t of a(n))l.call(n,t)&&i(e,t,n[t]);return e};import{g as c,n as r,m as u,v as d,h as p,r as m,a as h,c as y,f as b,d as f,i as v,k as x,l as S,t as g,F as C,j as T,e as k}from"./app.587128d6.js";import{p as w,t as O}from"./index.7dfb2a61.js";import{i as M}from"./index.81c07342.js";import{c as V}from"./index.48700d31.js";import{b as H}from"./index.8de114ab.js";import{b as P}from"./index.d7104814.js";import{l as B}from"./index.33bf7e57.js";import{u as j}from"./index.ccd7ee30.js";import{t as A}from"./index.02bb6ec7.js";import{n as L,U as D}from"./index.fef09045.js";var _={visible:{type:Boolean,default:!1},title:{type:String,default:A("md.cashier.pay")},describe:{type:String,default:""},channels:{type:Array,default:()=>[]},channelLimit:{type:Number,default:2},defaultIndex:{type:Number,default:0},paymentTitle:{type:String,default:A("md.cashier.payCash")},paymentAmount:{type:String,default:"0.00"},paymentDescribe:{type:String,default:""},payButtonText:{type:String,default:A("md.cashier.confirmPay")},payButtonDisabled:{type:Boolean,default:!1},moreButtonText:{type:String,default:A("md.cashier.morePayWays")}},I={paymentTitle:{type:String,default:""},paymentAmount:{type:String,default:""},paymentDescribe:{type:String,default:""},moreButtonText:{type:String,default:""},payButtonText:{type:String,default:""},payButtonDisabled:{type:Boolean,default:!1},channels:{type:Array,default:""},channelLimit:{type:Number,default:0},modelValue:{type:[Number,String],default:""}},N=c({components:{MdIcon:M,MdRadioList:B,MdButton:P},props:I,emits:["pay","update:modelValue"],setup(e,n){const{innerValue:t,isSingle:a,currentIndex:o,isChannelShow:l,toggleShowAllChannel:i,channelPayClick:s,displayChannels:c}=((e,{emit:n})=>{const t=p({get:()=>e.modelValue,set:e=>n(D,e)}),a=p((()=>e.channelLimit<1||e.channels.length>e.channelLimit)),o=p((()=>e.channels.findIndex((n=>n.value===e.modelValue)))),l=r(!1),i=p((()=>l.value?e.channels:[e.channels[-1!==o.value?o.value:0]]));return{innerValue:t,isSingle:a,currentIndex:o,isChannelShow:l,toggleShowAllChannel:()=>{l.value=!l.value},channelPayClick:()=>{const t=e.channels[o.value];n("pay",t)},displayChannels:i}})(e,n);return{innerValue:t,isSingle:a,currentIndex:o,displayChannels:c,isChannelShow:l,toggleShowAllChannel:i,channelPayClick:s}}}),$={class:"md-cashier-channel"},U={class:"choose-text"},F={class:"choose-channel"},R={class:"choose-channel-list"},z={key:1,class:"item-image"},Q={class:"md-cashier-block-btn"};N.render=function(e,n){const t=m("md-icon"),a=m("md-radio-list"),o=m("md-button");return h(),y(C,null,[b(" eslint-disable vue/no-v-html "),f("div",$,[f("div",U,[e.paymentTitle?(h(),y("p",{key:0,class:"choose-title",innerHTML:e.paymentTitle},null,8,["innerHTML"])):b("v-if",!0),e.paymentAmount?(h(),y("p",{key:1,class:"choose-number",innerHTML:e.paymentAmount},null,8,["innerHTML"])):b("v-if",!0),e.paymentDescribe?(h(),y("p",{key:2,class:"choose-describe",innerHTML:e.paymentDescribe},null,8,["innerHTML"])):b("v-if",!0)]),f("div",F,[v(e.$slots,"default"),f("div",R,[f(a,{modelValue:e.innerValue,"onUpdate:modelValue":n[1]||(n[1]=n=>e.innerValue=n),options:e.isSingle?e.displayChannels:e.channels,"icon-position":"right"},{left:x((({option:e})=>[e.icon?(h(),y(t,{key:0,name:e.icon,size:"lg"},null,8,["name"])):e.img?(h(),y("div",z,[f("img",{src:e.img},null,8,["src"])])):b("v-if",!0)])),_:1},8,["modelValue","options"])]),e.isSingle?(h(),y("div",{key:0,class:["choose-channel-more",[e.isChannelShow?"active":""]],onClick:n[2]||(n[2]=(...n)=>e.toggleShowAllChannel&&e.toggleShowAllChannel(...n)),innerHTML:e.moreButtonText},null,10,["innerHTML"])):b("v-if",!0)]),f("div",Q,[f(o,{class:"md-cashier-pay-button",type:e.payButtonDisabled?"disabled":"primary",onClick:e.channelPayClick},{default:x((()=>[v(e.$slots,"button",{},(()=>[S(g(e.payButtonText),1)]))])),_:3},8,["type","onClick"])])])],2112)};var E=N,W=c({name:"MdCashierChannelButton",components:{[P.name]:P},props:{actions:{type:Array,default:()=>[]}}}),q={class:"md-cashier-block-btn"};W.render=function(e,n){const t=m("md-button");return h(),y("div",q,[b(" eslint-disable vue/no-v-html"),(h(!0),y(C,null,T(e.actions,((n,a)=>(h(),y(t,{key:a,type:a===e.actions.length-1?"primary":"default",inline:e.actions.length>1,onClick:()=>{n.handler&&n.handler()},innerHTML:n.buttonText},null,8,["type","inline","onClick","innerHTML"])))),128))])};var G=c({name:"MdCashier",components:{MdPopup:w,MdPopupTitleBar:O,MdCashierChannel:E,MdIcon:M,MdCaptcha:V,MdActivityIndicatorSuccess:H,MdCashierChannelButton:W},props:_,emits:["pay","hide","update:visible","show","select"],setup(e,n){const{popupShow:t,onShow:a,onHide:o,hide:l,scene:i,sceneOption:c,currentPayChannelValue:p,payHandler:m,next:h}=((e,{emit:n})=>{const{popupShow:t,onShow:a,onHide:o,hide:l}=j(e,n),i=r("choose"),c=u({loading:{text:A("md.cashier.payResultSearch")},success:{text:A("md.cashier.paySuccess"),buttonText:A("md.cashier.confirm"),handler:null},fail:{text:A("md.cashier.payFail"),buttonText:A("md.cashier.confirm"),handler:null},captcha:{text:"",brief:"",maxlength:4,count:60,autoCountdown:!0,onSend:L,onSubmit:L,countNormalText:"",countActiveText:""}}),p=r(e.channels[0].value);return d(p,(e=>{n("select",e)})),{popupShow:t,onShow:a,onHide:o,hide:l,scene:i,sceneOption:c,currentPayChannelValue:p,payHandler:()=>{n("pay",p)},next:(e,n={})=>{i.value=e,c[i.value]=s(s({},c[i.value]),n)}}})(e,n);return{popupShow:t,onShow:a,onHide:o,hide:l,scene:i,sceneOption:c,currentPayChannelValue:p,payHandler:m,next:h}}}),J={class:"md-cashier-container"},K={key:0,class:"md-cashier-block md-cashier-choose"},X={class:"md-cashier-block md-cashier-captcha"},Y={class:"md-cashier-block-icon"},Z={class:"md-cashier-block-text"},ee={class:"md-cashier-block md-cashier-fail"},ne={class:"md-cashier-block-icon"},te={class:"md-cashier-block md-cashier-custom"};G.render=function(e,n){const t=m("md-popup-title-bar"),a=m("md-cashier-channel"),o=m("md-captcha"),l=m("md-activity-indicator-success"),i=m("md-cashier-channel-button"),s=m("md-icon"),c=m("md-popup");return h(),y(c,{modelValue:e.popupShow,"onUpdate:modelValue":n[2]||(n[2]=n=>e.popupShow=n),class:"md-cashier",position:"bottom","mask-closable":!1,"prevent-scroll":!0,"prevent-scroll-exclude":".md-cashier-container",onHide:e.onHide,onShow:e.onShow},{default:x((()=>[f(t,{title:e.title,describe:e.describe,"only-close":"",onCancel:e.hide},null,8,["title","describe","onCancel"]),f("div",J,[v(e.$slots,"header",{scene:e.scene}),b(" Choose pay channel "),"choose"===e.scene?(h(),y("div",K,[f(a,{modelValue:e.currentPayChannelValue,"onUpdate:modelValue":n[1]||(n[1]=n=>e.currentPayChannelValue=n),"payment-title":e.paymentTitle,"payment-amount":e.paymentAmount,"payment-describe":e.paymentDescribe,"more-button-text":e.moreButtonText,"pay-button-text":e.payButtonText,"pay-button-disabled":e.payButtonDisabled,channels:e.channels,"channel-limit":e.channelLimit,onPay:e.payHandler},null,8,["modelValue","payment-title","payment-amount","payment-describe","more-button-text","pay-button-text","pay-button-disabled","channels","channel-limit","onPay"])])):"captcha"===e.scene?(h(),y(C,{key:1},[b(" Captcha "),f("div",X,[f(o,{ref:"captcha",maxlength:e.sceneOption.captcha.maxlength,count:e.sceneOption.captcha.count,"count-normal-text":e.sceneOption.captcha.countNormalText,"count-active-text":e.sceneOption.captcha.countActiveText,"auto-countdown":e.sceneOption.captcha.autoCountdown,brief:e.sceneOption.captcha.brief,"is-view":"",onSend:e.sceneOption.captcha.onSend,onSubmit:e.sceneOption.captcha.onSubmit},{default:x((()=>[f("div",{textContent:g(e.sceneOption.captcha.text)},null,8,["textContent"])])),_:1},8,["maxlength","count","count-normal-text","count-active-text","auto-countdown","brief","onSend","onSubmit"])])],2112)):"loading"===e.scene||"success"===e.scene?(h(),y(C,{key:2},[b(" Loaing, Success "),f("div",{class:["md-cashier-block",{"md-cashier-loading":"loading"===e.scene,"md-cashier-success":"success"===e.scene}]},[f("div",Y,[f(l,{ref:"rolling","is-success":"success"===e.scene},null,8,["is-success"])]),f("div",Z,g("success"===e.scene?e.sceneOption.success.text:e.sceneOption.loading.text),1),"success"===e.scene?(h(),y(i,{key:0,actions:e.sceneOption.success.actions||[{buttonText:e.sceneOption.success.buttonText,handler:e.sceneOption.success.handler}]},null,8,["actions"])):b("v-if",!0)],2)],2112)):"fail"===e.scene?(h(),y(C,{key:3},[b(" Fail "),f("div",ee,[f("div",ne,[f(s,{name:"warn-color"})]),f("div",{class:"md-cashier-block-text",textContent:g(e.sceneOption.fail.text)},null,8,["textContent"]),f(i,{actions:e.sceneOption.fail.actions||[{buttonText:e.sceneOption.fail.buttonText,handler:e.sceneOption.fail.handler}]},null,8,["actions"])])],2112)):"custom"===e.scene?(h(),y(C,{key:4},[b(" Custom "),f("div",te,[v(e.$slots,"scene")])],2112)):b("v-if",!0),v(e.$slots,"footer",{scene:e.scene})])])),_:3},8,["modelValue","onHide","onShow"])};var ae=G;ae.install=e=>{e.component(ae.name,ae)};var oe=ae;const le=S("唤起收银台");var ie,se=c((ie=s({},{name:"CashierDemo",title:"基本"}),n(ie,t({expose:[],setup(e){const n=r(!1),t=r([{icon:"cashier-icon-1",text:"招商银行(0056)",value:"001"},{icon:"cashier-icon-2",text:"支付宝支付",value:"002"},{icon:"cashier-icon-3",text:"微信支付",value:"003"},{icon:"cashier-icon-4",text:"QQ钱包支付",value:"004"},{icon:"cashier-icon-5",text:"一网通支付",value:"005"}]),a=r(null),o=()=>{console.log(a.value),a.value.next("captcha",{text:"Verification code sent to 156 **** 8965",brief:"The latest verification code is still valid",autoCountdown:!1,countNormalText:"Send Verification code",countActiveText:"Retransmission after {$1}s",onSend:e=>{console.log("[Mand Mobile] Send Captcha"),e()},onSubmit:e=>{console.log(`[Mand Mobile] Send Submit ${e}`),a.value.next("loading"),setTimeout((()=>{a.value.next("success")}),2e3)}})};return(e,l)=>(h(),y(C,null,[f(k(P),{onClick:l[1]||(l[1]=e=>n.value=!n.value)},{default:x((()=>[le])),_:1}),f(k(oe),{ref:a,visible:n.value,"onUpdate:visible":l[2]||(l[2]=e=>n.value=e),class:"md-cashier-demo",channels:t.value,"channel-limit":2,"payment-amount":"100.00","payment-describe":"关于支付金额的特殊说明",onPay:o},null,8,["visible","channels"])],64))}})))),ce=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:se});export{ce as _};
