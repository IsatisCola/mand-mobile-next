var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,l=(e,t)=>{for(var a in t||(t={}))i.call(t,a)&&o(e,a,t[a]);if(r)for(var a of r(t))n.call(t,a)&&o(e,a,t[a]);return e},s=(e,r)=>t(e,a(r)),d=(e,t,a)=>(o(e,"symbol"!=typeof t?t+"":t,a),a);import{g as c,o as m,h as u,a as p,c as g,d as h,f,i as y,U as b,p as w,F as x,m as v,e as C,l as M}from"./app.e9c07f9f.js";import{t as I}from"./index.54999b98.js";import{a as S}from"./index.e2893564.js";import{t as A}from"./index.a703d93c.js";function k(e){let t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);const a=e.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return new Blob([r.buffer],{type:a})}var _={spinner:'<svg class="spinner" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" style="background:0 0"><rect x="46.5" y="15.5" rx="12.09" ry="4.03" width="7" height="17" fill="#eee"><animate attributeName="opacity" values="1;0" dur="1s" begin="-0.9166666666666666s" repeatCount="indefinite"/></rect><rect x="46.5" y="15.5" rx="12.09" ry="4.03" width="7" height="17" fill="#eee" transform="rotate(30 50 50)"><animate attributeName="opacity" values="1;0" dur="1s" begin="-0.8333333333333334s" repeatCount="indefinite"/></rect><rect x="46.5" y="15.5" rx="12.09" ry="4.03" width="7" height="17" fill="#eee" transform="rotate(60 50 50)"><animate attributeName="opacity" values="1;0" dur="1s" begin="-0.75s" repeatCount="indefinite"/></rect><rect x="46.5" y="15.5" rx="12.09" ry="4.03" width="7" height="17" fill="#eee" transform="rotate(90 50 50)"><animate attributeName="opacity" values="1;0" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite"/></rect><rect x="46.5" y="15.5" rx="12.09" ry="4.03" width="7" height="17" fill="#eee" transform="rotate(120 50 50)"><animate attributeName="opacity" values="1;0" dur="1s" begin="-0.5833333333333334s" repeatCount="indefinite"/></rect><rect x="46.5" y="15.5" rx="12.09" ry="4.03" width="7" height="17" fill="#eee" transform="rotate(150 50 50)"><animate attributeName="opacity" values="1;0" dur="1s" begin="-0.5s" repeatCount="indefinite"/></rect><rect x="46.5" y="15.5" rx="12.09" ry="4.03" width="7" height="17" fill="#eee" transform="rotate(180 50 50)"><animate attributeName="opacity" values="1;0" dur="1s" begin="-0.4166666666666667s" repeatCount="indefinite"/></rect><rect x="46.5" y="15.5" rx="12.09" ry="4.03" width="7" height="17" fill="#eee" transform="rotate(210 50 50)"><animate attributeName="opacity" values="1;0" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite"/></rect><rect x="46.5" y="15.5" rx="12.09" ry="4.03" width="7" height="17" fill="#eee" transform="rotate(240 50 50)"><animate attributeName="opacity" values="1;0" dur="1s" begin="-0.25s" repeatCount="indefinite"/></rect><rect x="46.5" y="15.5" rx="12.09" ry="4.03" width="7" height="17" fill="#eee" transform="rotate(270 50 50)"><animate attributeName="opacity" values="1;0" dur="1s" begin="-0.16666666666666666s" repeatCount="indefinite"/></rect><rect x="46.5" y="15.5" rx="12.09" ry="4.03" width="7" height="17" fill="#eee" transform="rotate(300 50 50)"><animate attributeName="opacity" values="1;0" dur="1s" begin="-0.08333333333333333s" repeatCount="indefinite"/></rect><rect x="46.5" y="15.5" rx="12.09" ry="4.03" width="7" height="17" fill="#eee" transform="rotate(330 50 50)"><animate attributeName="opacity" values="1;0" dur="1s" begin="0s" repeatCount="indefinite"/></rect></svg>',"warn-color":'<svg class="alert" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" style="background:0 0"><g fill="none" fill-rule="evenodd"><path d="M50.001 100C22.385 100 0 77.615 0 50.001 0 22.385 22.385 0 50.001 0 77.615 0 100 22.385 100 50.001 100 77.615 77.615 100 50.001 100z" fill="#F3F4F5"/><path d="M45.44 22h10.118l-1.821 34.217h-6.78L45.44 22zm9.646 45.366C56.36 68.575 57 70.036 57 71.758c0 1.943-.645 3.47-1.936 4.577-1.293 1.11-2.8 1.665-4.52 1.665-1.75 0-3.278-.547-4.584-1.644C44.654 75.26 44 73.728 44 71.758c0-1.721.626-3.183 1.873-4.392 1.248-1.205 2.776-1.809 4.585-1.809 1.806 0 3.35.604 4.628 1.809z" fill="#666F83"/></g></svg>',"success-color":'<svg class="alert" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" style="background:0 0"><g fill="#2F86F6" fill-rule="evenodd"><circle opacity=".08" cx="50" cy="50" r="50"/><path d="M76.992 35.422L46.865 65.524l.136.136-4.343 4.348-.14-.14-.12.12-4.413-4.41.125-.124L24.015 51.34l4.343-4.348L42.457 61.11l30.122-30.098z"/></g></svg>'},O=()=>{if(!document)return;const e=document.getElementById("__MAND_MOBILE_SVG_SPRITE_NODE__"),t=document.body;e||t.insertAdjacentHTML("afterbegin",`\n<svg\n  xmlns="http://www.w3.org/2000/svg"\n  xmlns:xlink="http://www.w3.org/1999/xlink"\n  id="__MAND_MOBILE_SVG_SPRITE_NODE__"\n  style="position:absolute;width:0;height:0"\n>\n  <defs>\n    ${Object.keys(_).map((e=>`<symbol id=${e}${_[e].split("svg")[1]}symbol>`)).join("")}\n  </defs>\n</svg>\n`)},U=c({name:"MdIcon",props:{name:{type:String,default:""},size:{type:String,default:"md"},color:{type:String,default:""},svg:{type:Boolean,default:!1}},setup(e){m((()=>O()));return{isInnerSvg:u((()=>!!_[e.name]))}}});U.render=function(e,t){return e.svg||e.isInnerSvg?(p(),g("svg",{key:0,class:["md-icon icon-svg",[`md-icon-${e.name}`,e.size]],style:{fill:e.color}},[h("use",{"xlink:href":`#${e.name}`},null,8,["xlink:href"])],6)):e.name?(p(),g("i",{key:1,class:["md-icon icon-font",[`md-icon-${e.name}`,e.name,e.size]],style:{color:e.color}},null,6)):f("v-if",!0)};var z=U;z.install=e=>{e.component(z.name,z)};var N="undefined"!=typeof window,P=N&&window.navigator.userAgent.toLowerCase();function F(){}P&&P.indexOf("android"),P&&/iphone|ipad|ipod|ios/.test(P),(e=>{const t=Date.now||(()=>+new Date),a=1e3;let r={},i=1;(()=>{const t=e.requestAnimationFrame||e.webkitRequestAnimationFrame;let a=!!t;if(t&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(t.toString())&&(a=!1),a)return(e,a)=>{t(e)};let r={},i=1,n=null,o=+new Date})()})("undefined"!=typeof window?window:global);var R=N?(e=>{const t=/OS (\d)_.* like Mac OS X/g.exec(e),a=/Android (\d.*?);/g.exec(e)||/Android\/(\d.*?) /g.exec(e),r=null==t?void 0:t.pop(),i=null==a?void 0:a.pop();return{oldIOS:!!r&&+r<8.3,oldAndroid:!!i&&+i.substr(0,3)<4.5,ios:/\(i[^;]+;( U;)? CPU.+Mac OS X/.test(e),android:/Android/g.test(e),mQQBrowser:/MQQBrowser/g.test(e)}})(navigator.userAgent):{oldIOS:!1,oldAndroid:!1,ios:!1,android:!1,mQQBrowser:!1};function j(e){const t=function(e){e=e.replace(/^data:([^;]+);base64,/gim,"").replace(/\s/g,"");const t=atob(e),a=t.length,r=new ArrayBuffer(a),i=new Uint8Array(r);for(let n=0;n<a;n++)i[n]=t.charCodeAt(n);return r}(e),a=new DataView(t);if(65496!==a.getUint16(0,!1))return-2;const r=a.byteLength;let i=2;for(;i<r;){const e=a.getUint16(i,!1);if(i+=2,65505===e){if(1165519206!==a.getUint32(i+=2,!1))return-1;const e=18761===a.getUint16(i+=6,!1);i+=a.getUint32(i+4,e);const t=a.getUint16(i,e);i+=2;for(let r=0;r<t;r++)if(274===a.getUint16(i+12*r,e))return a.getUint16(i+12*r+8,e)}else{if(65280!=(65280&e))break;i+=a.getUint16(i,!1)}}return-1}function B(e,t,a,r,i){if(!N)return;const{width:n,height:o}=function(e,t,a,r){const i={width:e.width,height:e.height};if("5678".indexOf(t)>-1&&(i.width=e.height,i.height=e.width),i.width<a||i.height<r)return i;const n=+i.width/+i.height;return a&&r?n>=a/r?i.width>a&&(i.width=a,i.height=Math.ceil(a/n)):i.height>r&&(i.height=r,i.width=Math.ceil(r*n)):a?a<i.width&&(i.width=a,i.height=Math.ceil(a/n)):r<i.height&&(i.width=Math.ceil(r*n),i.height=r),(i.width>=3264||i.height>=2448)&&(i.width*=.8,i.height*=.8),i}(e,t,a,r),l=document.createElement("canvas"),s=l.getContext("2d");l.width=+n,l.height=+o,s.drawImage(e,0,0,n,o);let d=null;if(CSS&&CSS.supports&&!CSS.supports("image-orientation:none"))switch(t){case 3:s.rotate(180*Math.PI/180),s.drawImage(e,-n,-o,n,o);break;case 6:s.rotate(90*Math.PI/180),s.drawImage(e,0,-n,o,n);break;case 8:s.rotate(270*Math.PI/180),s.drawImage(e,-o,0,o,n);break;case 2:s.translate(n,0),s.scale(-1,1),s.drawImage(e,0,0,n,o);break;case 4:s.translate(n,0),s.scale(-1,1),s.rotate(180*Math.PI/180),s.drawImage(e,-n,-o,n,o);break;case 5:s.translate(n,0),s.scale(-1,1),s.rotate(90*Math.PI/180),s.drawImage(e,0,-n,o,n);break;case 7:s.translate(n,0),s.scale(-1,1),s.rotate(270*Math.PI/180),s.drawImage(e,-o,0,o,n);break;default:s.drawImage(e,0,0,n,o)}else"5678".includes(t)?s.drawImage(e,0,0,o,n):s.drawImage(e,0,0,n,o);if(R.oldIOS||R.oldAndroid||R.mQQBrowser||!navigator.userAgent){const e=s.getImageData(0,0,l.width,l.height);d=b.encode(e,100*i)}else d=l.toDataURL("image/jpeg",i);return d}var D=function(e,t=F){return new Promise(((a,r)=>{const{dataUrl:i,width:n,height:o,quality:l}=e,s=j(i),d=k(i);if(s>1||l<1||n||o){const e=new Image;e.src=i,e.onload=()=>{const r=B(e,s,n,o,l),i=k(r);t(r,i),a({dataUrl:r,blob:i})},e.onerror=()=>{t(null),r(new Error("image load error"))}}else t(i,d),a({dataUrl:i,blob:d})}))},E="the number of pictures exceeds the limit",L={name:{type:String,default:()=>function(e="",t=8){return`${e}-${parseInt(""+Math.random()*Math.pow(10,t))}`}("image-reader")},disabled:{type:Boolean,deault:()=>!1},maxSize:{type:[String,Number],default:Number.MAX_VALUE},accept:{type:Array,default:()=>[]},isCameraOnly:{type:Boolean,default:!1},isMultiple:{type:Boolean,default:!1},maxAmount:{type:Number,default:Number.MAX_VALUE},beforeRead:{type:Function,default:void 0},isProcessor:{type:Boolean,default:()=>!1},processorOption:{type:Object,default:()=>({width:300,height:300,quality:.8})}},T=(e,{emit:t})=>{const a=y(Date.now()),r=()=>{a.value=Date.now()},i=u((()=>{if(e.accept.length){let t="";return e.accept.forEach((e=>{t+=`image/${e},`})),t.substring(0,t.length-1)}return"image/*"})),n=a=>{if(0===a.errorCode)if(e.isProcessor&&e.processorOption&&a.data){const{width:r,height:i,quality:n}=e.processorOption;D({dataUrl:a.data,width:r,height:i,quality:n}).then((({dataUrl:e})=>{t("complete",{dataUrl:e,blob:k(e),file:a.file,errorMsg:"上传成功",errorCode:0})}))}else t("complete",{dataUrl:a.data,blob:k(a.data),file:a.file,errorMsg:"上传成功",errorCode:0});else t("error",a)},o=t=>{const a={files:t,size:1e3*+e.maxSize,complete:n};new class{constructor(e){d(this,"files"),d(this,"index"),d(this,"size"),d(this,"complete");const{files:t,size:a}=e;this.files=t,this.index=0,this.size=a||0,this.complete=e.complete}readImage(){this.start(this.files)}start(e){e.map((e=>{this.readFileContent(e)}))}readFileContent(e){if(this.size&&e.size>this.size)return void this.complete({errorCode:101,errorMsg:`上传失败，您的图片超过最大值${this.size}kb`,file:e,data:null});const t=new FileReader;t.onload=()=>{this.complete({errorCode:0,errorMsg:"上传成功",file:e,data:t.result})},t.onerror=()=>{this.complete({errorCode:102,errorMsg:"上传失败",file:e,data:null})},t.readAsDataURL(e)}}(a).readImage()};return{inputTempKey:a,acceptType:i,onFileChange:a=>{const{files:i}=a.target;if(!i||!i.length||e.disabled)return;if(e.beforeRead){if(!e.beforeRead(i))return void r()}const n=[].slice.call(i);if(t("select",{files:n}),n&&e.maxAmount&&n.length>e.maxAmount)return t("error",{errorCode:"103",errorMsg:E,data:null}),void r();o(n)}}},$=c({name:"MdImageReader",props:L,emits:["select","complete","error"],setup(e,t){const{inputTempKey:a,acceptType:r,onFileChange:i}=T(e,t);return{inputTempKey:a,acceptType:r,onFileChange:i}}});$.render=function(e,t){return p(),g("div",{class:["md-image-reader",{disabled:e.disabled}]},[(p(),g("input",{key:e.inputTempKey,class:"md-image-reader-file",type:"file",name:e.name,maxSize:e.maxSize,maxAmount:e.maxAmount,disabled:e.disabled,accept:e.acceptType,capture:e.isCameraOnly,multiple:e.isMultiple,onChange:t[1]||(t[1]=(...t)=>e.onFileChange&&e.onFileChange(...t))},null,40,["name","maxSize","maxAmount","disabled","accept","capture","multiple"]))],2)};var q=$;q.install=e=>{e.component(q.name,q)};var Q=q;const V={class:"\n      md-example-child\n      md-example-child-reader\n      md-example-child-reader-0\n    "},K={class:"image-reader-list"},X={class:"image-reader-item add"},Y=h("p",null,"添加图片",-1);var G=c(s(l({},{name:"ImageReaderDemo",title:"基本"}),{expose:[],setup(e){const t=w({reader0:["//img-hxy021.didistatic.com/static/strategymis/insurancePlatform_spu/uploads/27fb7f097ca218d743f816836bc7ea4a","//manhattan.didistatic.com/static/manhattan/insurancePlatform_spu/uploads/c2912793a222eb24b606a582fd849ab7"]}),a=e=>{e.files.forEach((e=>{console.log("[Mand Mobile] ImageReader Selected:","File Name "+e.name)})),A.loading("图片读取中...")},r=e=>{if(e.dataUrl){(t.reader0||[]).push(e.dataUrl)}A.hide()},i=e=>{A.failed(e.msg)};return(e,n)=>(p(),g("div",V,[h("ul",K,[(p(!0),g(x,null,v(C(t).reader0,((e,a)=>(p(),g("li",{key:a,class:"image-reader-item",style:{backgroundImage:`url(${e})`,backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}},[h(C(I),{class:"image-reader-item-del",size:"small",shape:"quarter","fill-color":"#111A34",type:"fill","font-color":"#fff",onClick:e=>((e,a)=>{const r=t[e]||[];r.splice(a,1),t[e]=r})("reader0",a)},{default:M((()=>[h(C(S),{name:"close"})])),_:2},1032,["onClick"])],4)))),128)),h("li",X,[h(C(Q),{name:"reader0","is-multiple":"",onSelect:a,onComplete:r,onError:i}),h(C(S),{name:"camera",size:"md",color:"#CCC"}),Y])])]))}})),H=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:G});const J={class:"\n      md-example-child\n      md-example-child-reader\n      md-example-child-reader-1\n    "},W={class:"image-reader-list"},Z={class:"image-reader-item add"},ee=h("p",null,"添加图片",-1);var te=c(s(l({},{name:"ImageReaderDemo",title:"图片选择并轴向修正，压缩处理"}),{expose:[],setup(e){const t=w({reader0:[]}),a=()=>{A.loading("图片读取中...")},r=e=>{const a=t.reader0||[],r=e.dataUrl;D({dataUrl:r,width:200,height:200,quality:.1}).then((({dataUrl:e})=>{e&&a.push(e)})),A.hide()},i=e=>{A.failed(e.msg)};return(e,n)=>(p(),g("div",J,[h("ul",W,[(p(!0),g(x,null,v(C(t).reader0,((e,a)=>(p(),g("li",{key:a,class:"image-reader-item",style:{backgroundImage:`url(${e})`,backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}},[h(C(I),{class:"image-reader-item-del",size:"small",shape:"quarter","fill-color":"#111A34",type:"fill","font-color":"#fff",onClick:e=>((e,a)=>{const r=t[e]||[];r.splice(a,1),t[e]=r})("reader0",a)},{default:M((()=>[h(C(S),{name:"close"})])),_:2},1032,["onClick"])],4)))),128)),h("li",Z,[h(C(Q),{name:"reader1","is-multiple":"",onSelect:a,onComplete:r,onError:i}),h(C(S),{name:"camera",size:"md",color:"#CCC"}),ee])])]))}})),ae=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:te});export{H as _,ae as a};
