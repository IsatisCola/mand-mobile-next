var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,r=(e,t,a)=>(i(e,"symbol"!=typeof t?t+"":t,a),a);import{g as s,s as l,h as o,e as d,o as u,v as h,Z as p,m as c,x as v,a as g,c as f,d as y,i as m,F as w,j as b,f as x,ae as I,$ as H,ar as C}from"./app.66e75d7e.js";var S=class{constructor(e,t){r(this,"draging"),r(this,"startX"),r(this,"startY"),r(this,"isPrevent",!0),r(this,"$el"),r(this,"dragHandler"),r(this,"startHandler"),r(this,"endHandler"),r(this,"position"),this.draging=!1,this.$el=e,this.startX=0,this.startY=0,this.position=t,this.dragHandler=e=>this.onDrag(e),this.startHandler=e=>this.onDragStart(e),this.endHandler=e=>this.onDragEnd(e),this.initEvent()}initEvent(){this.$el.addEventListener("touchstart",this.startHandler),this.$el.addEventListener("touchmove",this.dragHandler),this.$el.addEventListener("touchend",this.endHandler)}onDragStart(e){this.draging=!0,this.position.draging=!0,this.preventHandler(e),this.startX=e.touches[0].pageX,this.startY=e.touches[0].pageY}onDrag(e){this.draging=!0,this.position.draging=!0,this.preventHandler(e),e.touches[0]&&(this.position.x=e.touches[0].pageX,this.position.y=e.touches[0].pageY)}onDragEnd(e){this.draging=!1,this.position.draging=!1,this.preventHandler(e),this.position.deltaX=this.position.x-this.startX}preventHandler(e){this.isPrevent&&(e.preventDefault(),e.stopPropagation())}destory(){this.$el.removeEventListener("touchstart",this.startHandler),this.$el.removeEventListener("touchmove",this.dragHandler),this.$el.removeEventListener("touchend",this.endHandler)}},X={autoplay:{type:Number,default:3e3,validator:e=>0===e||e>=500},transition:{type:String,default:"slide",validator:e=>["slide","slideY","fade"].includes(e)},defaultIndex:{type:Number,default:0,validator:e=>e>-1},hasDots:{type:Boolean,default:!0},isPrevent:{type:Boolean,default:!0},isLoop:{type:Boolean,default:!0},dragable:{type:Boolean,default:!0}};function E(e,r){return I.use(C),new I(e,((e,r)=>{for(var s in r||(r={}))a.call(r,s)&&i(e,s,r[s]);if(t)for(var s of t(r))n.call(r,s)&&i(e,s,r[s]);return e})({bounce:!1,deceleration:.1,probeType:3,momentum:!1},r))}var $=(e,{emit:t,slots:a})=>{let n=null;const i=l(null),r=o((()=>"slideY"===e.transition)),s=o((()=>{var e,t;return(null==(t=null==(e=a.default)?void 0:e.call(a)[0].children)?void 0:t.length)||0})),g=l(e.defaultIndex),f=e=>{g.value=e},y=()=>{i.value&&!n&&(n=E(i.value,{scrollX:!r.value,scrollY:r.value,slide:{threshold:100,autoplay:0!==e.autoplay,interval:e.autoplay,startPageXIndex:r.value?0:e.defaultIndex,startPageYIndex:r.value?e.defaultIndex:0,loop:e.isLoop},click:!e.isPrevent,disableTouch:!e.dragable,disableMouse:!e.dragable})),null==n||n.on("slidePageChanged",(e=>{const a=d(r)?e.pageY:e.pageX;t("afterChange",g.value,a),f(a)})),null==n||n.on("slideWillChange",(e=>{const a=d(r)?e.pageY:e.pageX;t("beforeChange",g.value,a),f(a)}))};u((()=>{var a;const n=null==(a=i.value)?void 0:a.getBoundingClientRect();"fade"!==e.transition&&(null==n?void 0:n.width)&&n.height&&y(),"fade"===e.transition&&i.value&&function(e,t,a,n){var i,r,s;const l=400,o=c({x:0,y:0,deltaX:0,draging:!1}),d=H(),u=null==(r=(null==(i=null==d?void 0:d.proxy)?void 0:i.$el).querySelector(".md-swiper-container"))?void 0:r.children,p=null==(s=null==u?void 0:u[0])?void 0:s.getBoundingClientRect(),g=Array.from(u||[]);e.style.height=(null==p?void 0:p.height)?(null==p?void 0:p.height)+"px":"0px",g[0].style.opacity="1";const f=new S(e,o);let y;h((()=>f.destory())),v((()=>o.deltaX),(e=>{const a=e<0;Math.abs(e)>((null==p?void 0:p.width)||0)/5&&(t.value=a?t.value+1:t.value-1,-1===t.value&&(t.value=g.length-1),t.value===g.length&&(t.value=0))})),v(t,((e,t)=>{g.forEach((e=>{e.style.transition=`opacity ${l}ms cubic-bezier(0.25, 0.46, 0.45, 0.94)`,e.style.opacity="0",e.style.zIndex="0",e.ontransitionend=null,e.ontransitionstart=null}));const a=g[e];a.style.opacity="1",a.style.zIndex="1",a.ontransitionstart=function(){n("beforeChange",t,e)},a.ontransitionend=function(){n("afterChange",t,e)}})),v((()=>o.draging),(e=>{e?stop():w()}));const m=()=>{y&&clearTimeout(y),y=null},w=()=>{a.autoplay>500&&g.length>1&&(m(),y=globalThis.setInterval((()=>{t.value=t.value+1,a.isLoop||t.value!==g.length-1?(-1===t.value&&(t.value=g.length-1),t.value===g.length&&(t.value=0)):b()}),a.autoplay+l))},b=()=>{m()};w(),h((()=>b()))}(i.value,g,e,t)})),h((()=>{null==n||n.destroy()})),p("swiper",c({currentIndex:g}));return{wrapRef:i,renderSwiper:y,resetSwiper:()=>{n&&(n.destroy(),n=null,y())},indicatorCount:s,currentIndex:g,getSwiperInstance:()=>n,isVertical:r}};var D=s({name:"MdSwiper",props:X,emits:["beforeChange","afterChange"],setup(e,t){const{indicatorCount:a,wrapRef:n,renderSwiper:i,resetSwiper:r,currentIndex:s,getSwiperInstance:l,isVertical:o}=$(e,t);return{indicatorCount:a,currentIndex:s,wrapper:n,renderSwiper:i,resetSwiper:r,getSwiperInstance:l,isVertical:o}}}),P={ref:"wrapper",class:"md-swiper-box"},Y={class:"md-swiper-container"};D.render=function(e,t){return g(),f("div",{class:["md-swiper",{"md-swiper-vertical":e.isVertical,"md-swiper-fade":"fade"===e.transition}]},[y("div",P,[y("div",Y,[m(e.$slots,"default")])],512),e.indicatorCount>1&&e.hasDots?(g(),f("div",{key:0,class:["md-swiper-indicators",{disabled:!e.hasDots}]},[(g(!0),f(w,null,b(e.indicatorCount,(t=>(g(),f("div",{key:t,class:["md-swiper-indicator",{"md-swiper-indicator-active":t-1===e.currentIndex}]},null,2)))),128))],2)):x("v-if",!0)],2)};var L=D;L.install=e=>{e.component(L.name,L)};var j=L;export{S as D,j as s};
