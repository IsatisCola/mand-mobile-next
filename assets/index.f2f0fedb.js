import{P as e,g as t,Q as a,R as l,U as n,n as r,s as i,V as o,h as d,x as u,W as s,r as p,X as c,a as f,c as m,y,d as v,t as b,f as g,i as h,F as k,C as H,k as x,z as I,Y as B}from"./app.cbe59ff4.js";import{f as V}from"./index.4082443c.js";import{c as F}from"./index.a769e3ae.js";import{n as S}from"./index.ce53d919.js";import{t as $}from"./index.02bb6ec7.js";var C={type:{type:String,default:"text"},previewType:{type:String,default:""},name:{type:[String,Number],default:()=>e("input-item")},title:{type:String,default:""},brief:{type:String,default:""},modelValue:{type:[String,Number],default:""},placeholder:{type:String,default:""},maxlength:{type:Number,default:1/0},size:{type:String,default:"normal"},align:{type:String,default:"left"},error:{type:String,default:""},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},solid:{type:Boolean,default:!0},clearable:{type:Boolean,default:!1},isVirtualKeyboard:{type:Boolean,default:!1},virtualKeyboardDisorder:{type:Boolean},virtualKeyboardOkText:{type:String,default:""},virtualKeyboardVm:{type:[Object,String],default:void 0},isTitleLatent:{type:Boolean,default:!1},isFormative:{type:Boolean,default:!1},isHighlight:{type:Boolean,default:!1},isAmount:{type:Boolean,default:!1},formation:{type:Function,default:void 0},okText:{type:String,default:$("md.number_keyboard.confirm")},hideDot:{type:Boolean,default:!1},disorder:{type:Boolean,default:!1}};function T(e,t,a){if(a)return a(e);let l="";switch(t){case"bankCard":l=K(e).replace(/\./g,"");break;case"phone":l=function(e){var t;if(!e)return"";e=e.replace(/[\sA-Za-z]/g,"");const a=/\d{3}/,l=e.match(a)?null==(t=e.match(a))?void 0:t.join(" ").trim():"";if(l){return(l+" "+K(e.replace(l,""))).trim()}return e}(e).replace(/\./g,"");break;case"digit":l=e.replace(/[\D\.]/g,"");break;case"money":l=M(e);break;default:l=e}return l}function K(e){var t;if(!e)return"";const a=/\d{4}/g;return(((e=e.replace(/[\sA-Za-z]/g,"")).match(a)?null==(t=e.match(a))?void 0:t.join(" ").trim():"")+" "+e.replace(/\d{4}/g,"")).trim()}function M(e,t=","){return e.replace(/(?!^)(?=(\d{3})+$)/g,t)}var N={modelValue:{type:[String,Number],default:""},placeholder:{type:String,default:""},maxlength:{type:Number,default:1/0},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},excludes:{type:[Object,String],default:void 0},gap:{type:Boolean,default:!1},type:{type:String,default:"text"},okText:{type:String,default:$("md.number_keyboard.confirm")},hideDot:{type:Boolean,default:!1},disorder:{type:Boolean,default:!1}},j=t({name:"MdFakeInputItem",components:{MdNumberKeyboard:S},directives:{clickOutside:F},props:N,emits:[a,l,n],setup(e,t){const{isFocus:r,clickHandler:p,blurHandler:c,innerValue:f,displayValue:m,deleteHandler:y,inputHandler:v,numberKeyBoardRef:b,box:g}=((e,{emit:t})=>{const r=i(null),p=d((()=>{var e;return null==(e=r.value)?void 0:e.$refs.popup.box})),c=i(!1),f=i(!1);u(c,(e=>t(e?a:l)));const m=i(""),y=d((()=>T(m.value+"",e.type)));return o((()=>{m.value=`${e.modelValue}`.replace(/\s|,/g,"")})),u(m,(e=>{t(n,e)})),{isFocus:c,isWaiting:f,clickHandler:()=>{c.value=!0},blurHandler:()=>{c.value=!1},inputHandler:t=>{`${m.value}`.length<e.maxlength&&(m.value+=t+"",y.value.length||s((()=>m.value="")))},deleteHandler:()=>{m.value=`${m.value}`.slice(0,-1)},numberKeyBoardRef:r,box:p,innerValue:m,displayValue:y}})(e,t);return{isFocus:r,clickHandler:p,blurHandler:c,innerValue:f,displayValue:m,inputHandler:v,deleteHandler:y,numberKeyBoard:b,box:g}}});j.render=function(e,t){const a=p("md-number-keyboard"),l=c("click-outside");return f(),m(k,null,[y(v("div",{class:["md-fake-input",{"is-focus":e.isFocus,"is-waiting":e.isFocus,disabled:e.disabled,readonly:e.readonly}],onClick:t[1]||(t[1]=(...t)=>e.clickHandler&&e.clickHandler(...t))},[v("span",{class:"md-fake-input-value",textContent:b(e.displayValue)},null,8,["textContent"]),""===e.innerValue&&""!==e.placeholder?(f(),m("span",{key:0,class:"md-fake-input-placeholder",textContent:b(e.placeholder)},null,8,["textContent"])):g("v-if",!0)],2),[[l,e.blurHandler,e.box]]),h(e.$slots,"keyboard",{focused:e.isFocus,refs:e.numberKeyBoard,inputHandler:e.inputHandler,deleteHandler:e.deleteHandler},(()=>[v(a,{ref:"numberKeyBoard",visible:e.isFocus,"onUpdate:visible":t[2]||(t[2]=t=>e.isFocus=t),class:"fake-input-keyboard","ok-text":e.okText,"hide-dot":e.hideDot,disorder:e.disorder,onEnter:e.inputHandler,onDelete:e.deleteHandler},null,8,["visible","ok-text","hide-dot","disorder","onEnter","onDelete"])]))],64)};var D=j,L=t({name:"MdInputItem",components:{MdFieldItem:V,MdIcon:r,MdFakeInput:D},props:C,emits:[n,a,l],setup(e,t){const{nativeInputType:r,isNativeInputFocus:u,focusHandler:s,blurHandler:p}=((e,{emit:t,slots:n})=>{const r=d((()=>{let t=e.type;return"bankCard"===t||"phone"===t||"digit"===t?t="tel":"money"===t&&(t="text"),t})),o=i(!1),u=d((()=>!!n.error||""!==e.error)),s=d((()=>!!n.brief||""!==e.brief));return{nativeInputType:r,isNativeInputFocus:o,focusHandler:()=>{o.value=!0,t(a)},blurHandler:()=>{o.value=!1,t(l)},isInputError:u,isInputBrief:s}})(e,t),{innerValue:c,nativeInputRef:f,nativeInputHandler:m,fakeInputHandler:y,nativeInputMaxLength:v,clearHandler:b}=((e,{emit:t})=>{const a=i(""),l=i(null);o((()=>{a.value=T(e.modelValue?""+e.modelValue:"",e.type||"text",e.formation)}));const r=d((()=>e.isFormative||"bankCard"===e.type||"phone"===e.type||"money"===e.type||"digit"===e.type)),u=d((()=>r.value?"":e.maxlength));return{innerValue:a,nativeInputRef:l,nativeInputHandler:i=>{const o=i.target.value,d=T(o?""+o:"",e.type||"text",e.formation);a.value=r.value?d:o,l.value&&(l.value.value=r.value?d:o),t(n,r.value?d.replace(/\s|,/g,""):o)},fakeInputHandler:e=>{a.value=e?e+"":"",t(n,e)},clearHandler:()=>{a.value="",t(n,"")},nativeInputMaxLength:u}})(e,t);return{nativeInputType:r,innerValue:c,nativeInputRef:f,nativeInputHandler:m,fakeInputHandler:y,clearHandler:b,nativeInputMaxLength:v,isNativeInputFocus:u,focusHandler:s,blurHandler:p}}}),R={key:0,class:"md-input-item-msg"},w={key:1,class:"md-input-item-brief"};L.render=function(e,t){const a=p("md-fake-input"),l=p("md-icon"),n=p("md-field-item");return f(),m(n,{class:["md-input-item",[e.isHighlight?"is-highlight":"",e.isTitleLatent?"is-title-latent":"",e.isNativeInputFocus?"is-focus":"",e.disabled?"is-disabled":"",e.isAmount?"is-amount":"",e.clearable?"is-clear":"",e.$slots.error||""!==e.error?"is-error":"",!e.$slots.brief&&""===e.brief||e.$slots.error||""!==e.error?"":"with-brief",e.align,e.size]],title:e.title,solid:e.solid&&!e.isTitleLatent},H({right:x((()=>[e.clearable?y((f(),m("div",{key:0,class:"md-input-item-clear",onMousedown:t[4]||(t[4]=B((()=>{}),["prevent"])),onClick:t[5]||(t[5]=(...t)=>e.clearHandler&&e.clearHandler(...t))},[v(l,{name:"clear"})],544)),[[I,e.isNativeInputFocus&&e.innerValue.length>0]]):g("v-if",!0),h(e.$slots,"right")])),children:x((()=>[e.$slots.error||""!==e.error?(f(),m("div",R,[""!==e.error?(f(),m("p",{key:0,textContent:b(e.error)},null,8,["textContent"])):h(e.$slots,"error",{key:1})])):g("v-if",!0),!e.$slots.brief&&""===e.brief||e.$slots.error||""!==e.error?g("v-if",!0):(f(),m("div",w,[""!==e.brief?(f(),m("p",{key:0,textContent:b(e.brief)},null,8,["textContent"])):h(e.$slots,"brief",{key:1})]))])),default:x((()=>[e.isVirtualKeyboard?(f(),m(a,{key:1,type:e.type,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,"model-value":e.innerValue,maxlength:e.maxlength,"ok-text":e.okText,"hide-dot":e.hideDot,disorder:e.disorder,"onUpdate:modelValue":e.fakeInputHandler,onFocus:e.focusHandler,onBlur:e.blurHandler},{keyboard:x((t=>[h(e.$slots,"default",t)])),_:1},8,["type","placeholder","disabled","readonly","model-value","maxlength","ok-text","hide-dot","disorder","onUpdate:modelValue","onFocus","onBlur"])):(f(),m("input",{key:0,ref:"nativeInputRef",class:"md-input-item-input",autocomplete:"off",type:e.nativeInputType,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,value:e.innerValue,maxlength:e.nativeInputMaxLength?1/0:e.maxlength,onFocus:t[1]||(t[1]=(...t)=>e.focusHandler&&e.focusHandler(...t)),onBlur:t[2]||(t[2]=(...t)=>e.blurHandler&&e.blurHandler(...t)),onInput:t[3]||(t[3]=(...t)=>e.nativeInputHandler&&e.nativeInputHandler(...t))},null,40,["type","placeholder","disabled","readonly","value","maxlength"]))])),_:2},[e.$slots.left?{name:"left",fn:x((()=>[h(e.$slots,"left")]))}:void 0]),1032,["class","title","solid"])};var z=L;z.install=e=>{e.component(z.name,z),e.component(D.name,D)};var A=z;export{M as f,A as i};
