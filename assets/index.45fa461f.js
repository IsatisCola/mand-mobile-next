import{g as e,n as a,h as t,o as r,a as l,c as n,d as s,i,F as o,j as c,f as u}from"./app.2c8ca32d.js";import{m}from"./index.cae61554.js";var v={content:{type:String,default:""},spacing:{type:[String,Number],default:"20vw"},repeatX:{type:Boolean,default:!0},repeatY:{type:Boolean,default:!0},rotate:{type:[String,Number],default:-30},opacity:{type:[String,Number],default:.1}},f=e=>{const l=a(null),n=a(null),s=t((()=>n.value?n.value.getContext("2d"):null));let i=0,o=0,c=2,u=0;return r((()=>{c=Math.max(m(),2),(()=>{var e;if(l.value&&n.value){const{clientHeight:a,clientWidth:t}=l.value;i=n.value.height=a*c,o=n.value.width=t*c,null==(e=s.value)||e.scale(1/c,1/c)}})(),(()=>{var a;const{spacing:t}=e;if("number"==typeof t)return void(u=t);const[,r=20,l="vw"]=null!=(a=/([0-9]+)([A-Za-z]+)/.exec(t))?a:[,20,"vw"];if("px"===l)u=Number(r);else if("vh"===l){const e=window.screen.height;u=Number(r)*e/100}else if("vw"===l){const e=window.screen.width;u=Number(r)*e/100}u*=c})(),(()=>{const{content:a}=e,t=14*c,r=a.length*t,l=Math.ceil(o*c/(r+u)),n=Math.ceil(i*c/(t+u));if(s.value){s.value.font=`${t}px DIN Alternate, "Helvetica Neue",Helvetica,"PingFang SC","Hiragino Sans GB","Microsoft YaHei","微软雅黑",Arial,sans-serif`,s.value.fillStyle="#858B9C";let e=0,i=0;for(let o=0;o<n;o++){e=0;for(let t=0;t<l;t++)s.value.fillText(a,e,i),e+=r;i+=t+u}}})()})),{markRef:l,canvasRef:n}},p=e({name:"MdWaterMark",props:v,setup(e){const{markRef:a,canvasRef:t}=f(e);return{mark:a,canvas:t}}}),d={class:"md-water-mark"},g={class:"water-mark-container"},w={key:0,ref:"mark",class:"water-mark-list"},k={key:0,ref:"canvas",class:"water-mark-canvas"};p.render=function(e,a){return l(),n("div",d,[s("div",g,[i(e.$slots,"default")]),e.$slots.watermark||e.content?(l(),n("div",w,[s("div",{class:"water-mark-list-wrapper",style:{opacity:e.opacity,transform:`rotate(${e.rotate}deg)`}},[e.content?(l(),n("canvas",k,null,512)):e.$slots.watermark?(l(!0),n(o,{key:1},c(e.repeatY?50:1,(a=>(l(),n("ul",{key:`line-${a}`,class:"water-mark-line",style:{marginBottom:e.spacing}},[(l(!0),n(o,null,c(e.repeatX?50:1,(t=>(l(),n("li",{key:`item-${t}`,class:"water-mark-item",style:a%2==0?{marginLeft:e.repeatX?e.spacing:0}:{marginRight:e.repeatX?e.spacing:0}},[i(e.$slots,"watermark",{coord:{row:a,col:t}})],4)))),128))],4)))),128)):u("v-if",!0)],4)],512)):u("v-if",!0)])};var y=p;y.install=e=>{e.component(y.name,y)};var h=y;export{h as w};
