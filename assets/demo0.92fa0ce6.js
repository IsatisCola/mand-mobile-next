var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(a,t,i)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[t]=i;import{g as o,n,E as d,v as c,r as m,a as u,c as f,f as p,d as v,F as g,j as w,k as b,i as y,t as h,e as I}from"./app.2c8ca32d.js";import{s as x}from"./index.f3f1c3aa.js";import{t as k}from"./index.f762e23f.js";import{i as j}from"./index.50769888.js";import{t as V}from"./index.db6796ca.js";import{v as C,D as O,a as _}from"./index.cae61554.js";var D={visible:{type:Boolean,default:!1},list:{type:Array,default:()=>[]},defaultIndex:{type:Number,default:0},hasDots:{type:Boolean,default:!0},deletable:{type:Boolean,default:!1}},S=o({name:"MdImageViewer",components:{MdSwiper:x,MdTag:k,MdIcon:j,MdTransition:V},props:D,emits:[C,O,_],setup(e,a){const{currentImgIndex:t,isViewerShow:i,dataList:r,closeViewer:s,showViewer:l,afterChange:o,onDeleteImage:m}=((e,{emit:a})=>{const t=n(0),i=n(!1),r=n([]);return d((()=>{i.value=e.visible})),d((()=>{r.value=(e=>{const a=[];return e.map((e=>{const t="object"==typeof e?e:{dataUrl:e};a.push(t)})),a})(e.list)})),c((()=>e.defaultIndex),((e,a)=>{t.value=e})),{currentImgIndex:t,isViewerShow:i,dataList:r,onDeleteImage:e=>{r.value.splice(e,1),a(C,r),a(O,e)},showViewer:e=>{i.value=!0,t.value=e,a(_,!0)},closeViewer:()=>{i.value=!1,a(_,!1)},afterChange:(e,a)=>{t.value=a}}})(e,a);return{currentImgIndex:t,isViewerShow:i,dataList:r,onDeleteImage:m,closeViewer:s,showViewer:l,afterChange:o}}}),U={class:"md-image-viewer-box"},P={class:"md-image-list"},L={class:"md-swipper-warp"},M={class:"item"},A={key:0,class:"md-viewer-index"};S.render=function(e,a){const t=m("md-icon"),i=m("md-tag"),r=m("md-swiper"),s=m("md-transition");return u(),f("div",U,[p(" list "),v("div",P,[(u(!0),f(g,null,w(e.dataList,((a,r)=>(u(),f("div",{key:r,class:"md-image-item preview",style:{backgroundImage:`url(${a.dataUrl})`,backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},onClick:a=>e.showViewer(r)},[e.deletable?(u(),f(i,{key:0,class:"md-image-item-del",size:"small",shape:"quarter","fill-color":"#111A34",type:"fill","font-color":"#fff",onClick:a=>e.onDeleteImage(r)},{default:b((()=>[v(t,{name:"close"})])),_:2},1032,["onClick"])):p("v-if",!0)],12,["onClick"])))),128)),y(e.$slots,"default")]),p("swipper"),v(s,{name:"md-fade"},{default:b((()=>[e.isViewerShow?(u(),f("div",{key:0,class:"md-image-viewer",onClick:a[1]||(a[1]=(...a)=>e.closeViewer&&e.closeViewer(...a))},[v("div",L,[v(r,{ref:"swiper",autoplay:0,"default-index":e.currentImgIndex,"has-dots":!1,"is-prevent":!1,onAfterChange:e.afterChange},{default:b((()=>[(u(!0),f(g,null,w(e.dataList,((e,a)=>(u(),f("div",{key:a,class:"md-viewer-item"},[v("div",M,[e.dataUrl?(u(),f("img",{key:0,src:e.dataUrl,alt:e.dataUrl},null,8,["src","alt"])):p("v-if",!0)])])))),128))])),_:1},8,["default-index","onAfterChange"]),e.hasDots?(u(),f("div",A,h(e.currentImgIndex+1)+"/"+h(e.dataList.length),1)):p("v-if",!0)])])):p("v-if",!0)])),_:1})])};var z=S;z.install=e=>{e.component(z.name,z)};var B=z;var T,E=o((T=((e,a)=>{for(var t in a||(a={}))r.call(a,t)&&l(e,t,a[t]);if(i)for(var t of i(a))s.call(a,t)&&l(e,t,a[t]);return e})({},{name:"ImageViewerDemo",title:"基本"}),a(T,t({expose:[],setup(e){const a=n([{dataUrl:"//img-hxy021.didistatic.com/static/strategymis/insurancePlatform_spu/uploads/27fb7f097ca218d743f816836bc7ea4a"},{dataUrl:"//manhattan.didistatic.com/static/manhattan/insurancePlatform_spu/uploads/c2912793a222eb24b606a582fd849ab7"}]),t=n(!1);return(e,i)=>(u(),f("div",null,[v(I(B),{list:a.value,"onUpdate:list":i[1]||(i[1]=e=>a.value=e),visible:t.value,"onUpdate:visible":i[2]||(i[2]=e=>t.value=e),"default-index":1},null,8,["list","visible"])]))}})))),$=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:E});export{$ as _};
