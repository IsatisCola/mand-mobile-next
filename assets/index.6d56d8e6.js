import{g as e,m as t,D as a,h as l,s as n,E as r,r as i,G as d,a as o,c as u,v as s,d as p,t as c,f,i as m,F as y,w as v,x as b}from"./app.08bd491c.js";import{f as g}from"./index.f6647c19.js";import{i as h}from"./index.cbc81f59.js";import{r as x,F as k,B as H,U as I}from"./index.4144d9c5.js";import{c as B}from"./index.90ddb7fb.js";import{n as V}from"./index.ce67fe18.js";import{t as F}from"./index.02bb6ec7.js";var S={type:{type:String,default:"text"},previewType:{type:String,default:""},name:{type:[String,Number],default:()=>x("input-item")},title:{type:String,default:""},brief:{type:String,default:""},modelValue:{type:[String,Number],default:""},placeholder:{type:String,default:""},maxlength:{type:Number,default:1/0},size:{type:String,default:"normal"},align:{type:String,default:"left"},error:{type:String,default:""},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},solid:{type:Boolean,default:!0},clearable:{type:Boolean,default:!1},isVirtualKeyboard:{type:Boolean,default:!1},virtualKeyboardDisorder:{type:Boolean},virtualKeyboardOkText:{type:String,default:""},virtualKeyboardVm:{type:[Object,String],default:void 0},isTitleLatent:{type:Boolean,default:!1},isFormative:{type:Boolean,default:!1},isHighlight:{type:Boolean,default:!1},isAmount:{type:Boolean,default:!1},formation:{type:Function,default:void 0},okText:{type:String,default:F("md.number_keyboard.confirm")},hideDot:{type:Boolean,default:!1},disorder:{type:Boolean,default:!1}};function T(e,t,a){if(a)return a(e);let l="";switch(t){case"bankCard":l=j(e).replace(/\./g,"");break;case"phone":l=function(e){var t;if(!e)return"";e=e.replace(/[\sA-Za-z]/g,"");const a=/\d{3}/,l=e.match(a)?null==(t=e.match(a))?void 0:t.join(" ").trim():"";if(l){return(l+" "+j(e.replace(l,""))).trim()}return e}(e).replace(/\./g,"");break;case"digit":l=e.replace(/[\D\.]/g,"");break;case"money":l=K(e);break;default:l=e}return l}function j(e){var t;if(!e)return"";const a=/\d{4}/g;return(((e=e.replace(/[\sA-Za-z]/g,"")).match(a)?null==(t=e.match(a))?void 0:t.join(" ").trim():"")+" "+e.replace(/\d{4}/g,"")).trim()}function K(e,t=","){return e.replace(/(?!^)(?=(\d{3})+$)/g,t)}var N={modelValue:{type:[String,Number],default:""},placeholder:{type:String,default:""},maxlength:{type:Number,default:1/0},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},excludes:{type:[Object,String],default:void 0},gap:{type:Boolean,default:!1},type:{type:String,default:"text"},okText:{type:String,default:F("md.number_keyboard.confirm")},hideDot:{type:Boolean,default:!1},disorder:{type:Boolean,default:!1}},M=e({name:"MdFakeInputItem",components:{MdNumberKeyboard:V},directives:{clickOutside:B},props:N,emits:[k,H,I],setup(e,i){const{isFocus:d,clickHandler:o,blurHandler:u,innerValue:s,displayValue:p,deleteHandler:c,inputHandler:f,numberKeyBoardRef:m,box:y}=((e,{emit:i})=>{const d=t(null),o=l((()=>{var e;return null==(e=d.value)?void 0:e.$refs.popup.box})),u=t(!1),s=t(!1),p=t(""),c=l((()=>T(p.value+"",e.type)));return a((()=>{p.value=`${e.modelValue}`.replace(/\s|,/g,"")})),n(p,(e=>{i(I,e)})),{isFocus:u,isWaiting:s,clickHandler:()=>{u.value=!0,i(k)},blurHandler:()=>{u.value=!1,i(H)},inputHandler:t=>{`${p.value}`.length<e.maxlength&&(p.value+=t+"",c.value.length||r((()=>p.value="")))},deleteHandler:()=>{p.value=`${p.value}`.slice(0,-1)},numberKeyBoardRef:d,box:o,innerValue:p,displayValue:c}})(e,i);return{isFocus:d,clickHandler:o,blurHandler:u,innerValue:s,displayValue:p,inputHandler:f,deleteHandler:c,numberKeyBoard:m,box:y}}});M.render=function(e,t){const a=i("md-number-keyboard"),l=d("click-outside");return o(),u(y,null,[s(p("div",{class:["md-fake-input",{"is-focus":e.isFocus,"is-waiting":e.isFocus,disabled:e.disabled,readonly:e.readonly}],onClick:t[1]||(t[1]=(...t)=>e.clickHandler&&e.clickHandler(...t))},[p("span",{class:"md-fake-input-value",textContent:c(e.displayValue)},null,8,["textContent"]),""===e.innerValue&&""!==e.placeholder?(o(),u("span",{key:0,class:"md-fake-input-placeholder",textContent:c(e.placeholder)},null,8,["textContent"])):f("v-if",!0)],2),[[l,e.blurHandler,e.box]]),m(e.$slots,"keyboard",{focused:e.isFocus,refs:e.numberKeyBoard,inputHandler:e.inputHandler,deleteHandler:e.deleteHandler},(()=>[p(a,{ref:"numberKeyBoard",visible:e.isFocus,"onUpdate:visible":t[2]||(t[2]=t=>e.isFocus=t),class:"fake-input-keyboard","ok-text":e.okText,"hide-dot":e.hideDot,disorder:e.disorder,onEnter:e.inputHandler,onDelete:e.deleteHandler},null,8,["visible","ok-text","hide-dot","disorder","onEnter","onDelete"])]))],64)};var D=M,$=e({name:"MdInputItem",components:{MdFieldItem:g,MdIcon:h,MdFakeInput:D},props:S,emits:[I,k,H],setup(e,n){const{nativeInputType:r,isNativeInputFocus:i,focusHandler:d,blurHandler:o}=((e,{emit:a,slots:n})=>{const r=l((()=>{let t=e.type;return"bankCard"===t||"phone"===t||"digit"===t?t="tel":"money"===t&&(t="text"),t})),i=t(!1),d=l((()=>!!n.error||""!==e.error)),o=l((()=>!!n.brief||""!==e.brief));return{nativeInputType:r,isNativeInputFocus:i,focusHandler:()=>{i.value=!0,a(k)},blurHandler:()=>{i.value=!1,a(H)},isInputError:d,isInputBrief:o}})(e,n),{innerValue:u,nativeInputRef:s,nativeInputHandler:p,fakeInputHandler:c,nativeInputMaxLength:f}=((e,{emit:n})=>{const r=t(""),i=t(null);a((()=>{r.value=T(e.modelValue?""+e.modelValue:"",e.type||"text",e.formation)}));const d=l((()=>e.isFormative||"bankCard"===e.type||"phone"===e.type||"money"===e.type||"digit"===e.type)),o=l((()=>d.value?"":e.maxlength));return{innerValue:r,nativeInputRef:i,nativeInputHandler:t=>{const a=t.target.value,l=T(a?""+a:"",e.type||"text",e.formation);r.value=d.value?l:a,i.value&&(i.value.value=d.value?l:a),n(I,d.value?l.replace(/\s|,/g,""):a)},fakeInputHandler:e=>{r.value=e?e+"":"",n(I,e)},nativeInputMaxLength:o}})(e,n);return{nativeInputType:r,innerValue:u,nativeInputRef:s,nativeInputHandler:p,fakeInputHandler:c,nativeInputMaxLength:f,isNativeInputFocus:i,focusHandler:d,blurHandler:o}}}),C={key:0,class:"md-input-item-clear"};$.render=function(e,t){const a=i("md-fake-input"),l=i("md-icon"),n=i("md-field-item");return o(),u(n,{class:["md-input-item",[e.isHighlight?"is-highlight":"",e.isTitleLatent?"is-title-latent":"",e.isNativeInputFocus?"is-focus":"",e.disabled?"is-disabled":"",e.isAmount?"is-amount":"",e.clearable?"is-clear":"",e.align,e.size]],title:e.title,solid:e.solid&&!e.isTitleLatent},{left:v((()=>[m(e.$slots,"left")])),right:v((()=>[e.clearable?s((o(),u("div",C,[p(l,{name:"clear"})],512)),[[b,e.isNativeInputFocus]]):f("v-if",!0),m(e.$slots,"right")])),default:v((()=>[e.isVirtualKeyboard?(o(),u(a,{key:1,type:e.type,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,"model-value":e.innerValue,maxlength:e.maxlength,"ok-text":e.okText,"hide-dot":e.hideDot,disorder:e.disorder,"onUpdate:modelValue":e.fakeInputHandler},{keyboard:v((t=>[m(e.$slots,"default",t)])),_:1},8,["type","placeholder","disabled","readonly","model-value","maxlength","ok-text","hide-dot","disorder","onUpdate:modelValue"])):(o(),u("input",{key:0,ref:"nativeInputRef",class:"md-input-item-input",autocomplete:"off",type:e.nativeInputType,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,value:e.innerValue,maxlength:e.nativeInputMaxLength?1/0:e.maxlength,onFocus:t[1]||(t[1]=(...t)=>e.focusHandler&&e.focusHandler(...t)),onBlur:t[2]||(t[2]=(...t)=>e.blurHandler&&e.blurHandler(...t)),onInput:t[3]||(t[3]=(...t)=>e.nativeInputHandler&&e.nativeInputHandler(...t))},null,40,["type","placeholder","disabled","readonly","value","maxlength"]))])),_:1},8,["class","title","solid"])};var L=$;L.install=e=>{e.component(L.name,L),e.component(D.name,D)};var R=L;export{K as f,R as i};
