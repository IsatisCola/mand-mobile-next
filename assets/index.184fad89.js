import{g as e,h as l,n as a,E as t,o as n,r as o,H as d,a as s,c as u,x as r,d as i,F as c,j as p,l as f,t as m,f as y,i as v}from"./app.7b5dc9e9.js";import{n as b}from"./index.3ec97a6a.js";import{c as x}from"./index.90ddb7fb.js";import{U as h}from"./index.5a7140ad.js";var k={modelValue:{type:String,default:""},maxlength:{type:Number,default:4},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},justify:{type:Boolean,default:!1},mask:{type:Boolean,default:!1},system:{type:Boolean,default:!1},okText:{type:String},disorder:{type:Boolean,default:!1},isView:{type:Boolean,default:!1}};function g(e,l=100){if(e){const a=document.createElement("input");a.style.position="absolute",a.style.top=e.offsetTop+7+"px",a.style.left=e.offsetLeft+"px",a.style.height="0px",a.style.opacity="0",a.style.border="none",a.style.outline="none",document.body.appendChild(a),a.focus(),setTimeout((function(){var l,a;null==(l=null==e?void 0:e.focus)||l.call(e),null==(a=null==e?void 0:e.click)||a.call(e)}),l);return()=>{a&&(a.focus(),a.blur(),document.body.removeChild(a))}}}var H=e({name:"MdCodebox",components:{MdNumberKeyboard:b},directives:{clickOutside:x},props:k,emits:[h],setup(e,o){const{code:d,focused:s,focusHandler:u,blurHandler:r,inputHandler:i,nativeInputHandler:c,deleteHandler:p,numberKeyBoardRef:f,box:m,nativeInputRef:y}=((e,{emit:o})=>{const d=l({get:()=>e.modelValue,set:e=>o(h,e)}),s=a(!1),u=()=>{var l;s.value=!0,e.system&&(null==(l=p.value)||l.focus())},r=()=>{s.value=!1},i=a(null),c=l((()=>{var e,l;return null==(l=null==(e=i.value)?void 0:e.$refs.popup)?void 0:l.box})),p=a(null);return t((()=>{d.value.length>=e.maxlength&&r()})),n((()=>{e.autofocus&&u()})),{code:d,focused:s,focusHandler:u,blurHandler:r,inputHandler:l=>{d.value.length<e.maxlength&&(d.value+=`${l}`)},nativeInputHandler:l=>{l.target.value.length<=e.maxlength&&(d.value=l.target.value)},deleteHandler:()=>{d.value=`${d.value}`.slice(0,-1)},numberKeyBoardRef:i,box:c,nativeInputRef:p}})(e,o);return{code:d,focused:s,focusHandler:u,blurHandler:r,inputHandler:i,nativeInputHandler:c,deleteHandler:p,numberKeyBoard:f,box:m,input:y}}}),B={class:"md-codebox-wrapper"},j={key:0,class:"md-codebox-dot"},I={key:1,class:"md-codebox-blink"};H.render=function(e,l){const a=o("md-number-keyboard"),t=d("click-outside");return s(),u("div",B,[r(i("div",{class:["md-codebox",{"is-disabled":e.disabled,"is-justify":e.justify}],onClick:l[2]||(l[2]=(...l)=>e.focusHandler&&e.focusHandler(...l))},[e.maxlength>0?(s(!0),u(c,{key:0},p(e.maxlength,(l=>(s(),u("span",{key:l,class:["md-codebox-box",l===e.code.length+1&&e.focused&&"is-active",""!==e.code[l-1]&&"is-filled"]},[e.code[l-1]?(s(),u(c,{key:0},[e.mask?(s(),u("i",j)):(s(),u(c,{key:1},[f(m(e.code[l-1]),1)],2112))],2112)):y("v-if",!0),l===e.code.length+1&&e.focused?(s(),u("i",I)):y("v-if",!0)],2)))),128)):(s(),u(c,{key:1},[e.mask?(s(),u("input",{key:0,type:"password",maxlength:e.maxlength,value:e.code,readonly:"",disabled:"",class:["md-codebox-holder",e.focused&&"is-active"]},null,10,["maxlength","value"])):(s(),u("input",{key:1,type:"text",maxlength:e.maxlength,value:e.code,readonly:"",disabled:"",class:["md-codebox-holder",e.focused&&"is-active"]},null,10,["maxlength","value"]))],2112)),y(" hidden input "),e.system?(s(),u("input",{key:2,ref:"input",value:e.code,type:e.mask?"password":"text",maxlength:e.maxlength,class:"md-codebox-input",onInput:l[1]||(l[1]=(...l)=>e.nativeInputHandler&&e.nativeInputHandler(...l))},null,40,["value","type","maxlength"])):y("v-if",!0)],2),[[t,e.blurHandler,e.box]]),v(e.$slots,"default"),v(e.$slots,"keyboard",{focused:e.focused,refs:e.numberKeyBoard,inputHandler:e.inputHandler,deleteHandler:e.deleteHandler},(()=>[e.system?y("v-if",!0):(s(),u(a,{key:0,ref:"numberKeyBoard",visible:e.focused,"onUpdate:visible":l[3]||(l[3]=l=>e.focused=l),class:"fake-input-keyboard",type:"simple","ok-text":e.okText,disorder:e.disorder,"is-view":e.isView,onEnter:e.inputHandler,onDelete:e.deleteHandler},null,8,["visible","ok-text","disorder","is-view","onEnter","onDelete"]))]))])};var w=H;w.install=e=>{e.component(w.name,w)};var K=w;export{K as c,g as f};
