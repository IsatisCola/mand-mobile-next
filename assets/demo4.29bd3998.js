var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,d=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,o=(e,l)=>{for(var a in l||(l={}))r.call(l,a)&&d(e,a,l[a]);if(t)for(var a of t(l))n.call(l,a)&&d(e,a,l[a]);return e},u=(e,t)=>l(e,a(t));import{g as i,U as s,s as m,h as p,a6 as v,o as c,x as g,v as f,m as h,r as b,a as y,c as V,d as x,i as S,F as _,j as w,k as j,W as H,e as O}from"./app.e8aebefe.js";import{t as R}from"./index.6b17f588.js";import{D as T}from"./index.130941ec.js";var E={modelValue:{type:[Array,Number],default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1,validator:e=>e>0&&Number.isSafeInteger(e)},range:{type:Boolean,default:!1},format:{type:Function,default:e=>e},disabled:{type:Boolean,default:!1},hasTip:{type:Boolean,default:!0},tipPlacement:{type:String,default:"top"}},M=(e,{emit:l})=>{const a=m(null),t=m(null),r=m(null),n=m({width:0,height:0,top:0,bottom:0,left:0,right:0}),d=m([]),o=m(null),{position:u,winDragger:i}=function(){const e=h({x:0,y:0,deltaX:0,draging:!1}),l=new T(window,e);return l.isPrevent=!1,l.destory(),{winDragger:l,position:e}}(),b=m(0),y=m(0);let V,x=null;const S=p((()=>Array.isArray(e.modelValue))),_=p({get:()=>e.modelValue,set:e=>l(s,e)});v((()=>{d.value=[]})),c((()=>{Object.keys(n.value).forEach((e=>{var l,a;n.value[e]=null!=(a=null==(l=r.value)?void 0:l.getBoundingClientRect()[e])?a:0})),V=n.value.width/(e.max-e.min),b.value=S.value?(e.modelValue[1]-e.modelValue[0])*V:(e.modelValue-e.min)*V,y.value=S.value?(e.modelValue[0]-e.min)*V:0,S.value?(d.value[0].style.left=`${y.value}px`,d.value[1].style.left=`${y.value+b.value}px`):d.value[0].style.left=`${b.value}px`}));return g((()=>u.draging),(e=>{var l;const a=null==(l=o.value)?void 0:l.parentElement;e&&a?a.classList.add("is-active"):a&&(a.classList.remove("is-active"),o.value=null,i.destory())})),f((()=>{i.destory()})),{tipRef:a,tipRefHigther:t,barRef:r,draggers:d,position:u,dragStartHandler:l=>{var n,s,m;i.initEvent(),function(e,l){e.preventDefault(),e.stopPropagation(),l.value=e.target}(l,o);const p=null==(n=d.value[0])?void 0:n.contains(o.value);e.hasTip&&(p?null==(s=a.value)||s.triggerShow(!0):null==(m=t.value)||m.triggerShow(!0)),x=g((()=>u.x),(l=>{var a,t,n;const{x:d,width:u}=null!=(t=null==(a=r.value)?void 0:a.getBoundingClientRect())?t:{x:0,width:0},i=null==(n=o.value)?void 0:n.parentElement,s=Math.round((l-d)/V),m=Math.round(s/e.step)*e.step;l-d>0&&!(l>u+d)&&(S.value?(_.value=p?[Math.min(m+e.min,e.modelValue[1]),e.modelValue[1]]:[e.modelValue[0],Math.max(m+e.min,e.modelValue[0])],H((()=>{b.value=(e.modelValue[1]-e.modelValue[0])*V,y.value=(e.modelValue[0]-e.min)*V,i.style.left=p?`${y.value}px`:`${y.value+b.value}px`}))):(_.value=m+e.min,b.value=m*V,i.style.left=`${b.value}px`))}))},dragEndHandler:()=>{var l,r,n;e.hasTip&&((null==(l=d.value[0])?void 0:l.contains(o.value))?null==(r=a.value)||r.triggerShow(!1):null==(n=t.value)||n.triggerShow(!1)),null==x||x(),x=null},currentWidth:b,currentLeft:y,realValue:_,isRange:S}};var D=i({name:"MdSlider",components:{MdTip:R},props:E,emits:[s],setup(e,l){const{tipRef:a,tipRefHigther:t,dragStartHandler:r,dragEndHandler:n,draggers:d,barRef:o,position:u,currentWidth:i,currentLeft:s,realValue:m,isRange:p}=M(e,l);return{tip:a,tipHigther:t,dragStartHandler:r,dragEndHandler:n,draggers:d,slider:o,position:u,currentWidth:i,currentLeft:s,realValue:m,isRange:p}}});D.render=function(e,l){const a=b("md-tip");return y(),V("div",{ref:"slider",role:"slider",class:["md-slider",{"is-disabled":e.disabled}]},[x("div",{class:"md-slider-bar",style:{width:e.currentWidth+"px",left:e.currentLeft+"px"}},null,4),S(e.$slots,"dragger",{value:e.modelValue,onTouchStart:e.dragStartHandler,onTouchEnd:e.dragEndHandler,refs:e.draggers,isRange:e.isRange,format:e.format},(()=>[(y(!0),V(_,null,w(e.isRange?[0,1]:[0],(t=>(y(),V("div",{key:t,ref:l=>e.draggers[t]=l,class:["md-slider-handle",[1===t?"is-higher":""]]},[x(a,{ref:0===t?"tip":"tipHigther",name:"slider-tip",closable:!1,placement:e.tipPlacement,content:Array.isArray(e.realValue)?e.format(e.realValue[t].toString()):e.format(e.realValue.toString())},{default:j((()=>[x("span",{onTouchstart:l[1]||(l[1]=(...l)=>e.dragStartHandler&&e.dragStartHandler(...l)),onTouchend:l[2]||(l[2]=(...l)=>e.dragEndHandler&&e.dragEndHandler(...l))},null,32)])),_:2},1032,["placement","content"])],2)))),128))]))],2)};var P=D;P.install=e=>{e.component(P.name,P)};var $=P;const L={class:"md-example-child md-example-child-slider-0"};var U=i(u(o({},{name:"SliderDemo",title:"基本"}),{expose:[],setup(e){const l=m(10);return(e,a)=>(y(),V("div",L,[x(O($),{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value=e)},null,8,["modelValue"])]))}})),z=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:U});const A={class:"md-example-child md-example-child-slider-0"};var B=i(u(o({},{name:"SliderDemo",title:"禁用"}),{expose:[],setup(e){const l=m(55);return(e,a)=>(y(),V("div",A,[x(O($),{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value=e),disabled:!0},null,8,["modelValue"])]))}})),N=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:B});const W={class:"md-example-child md-example-child-slider-0"};var k=i(u(o({},{name:"SliderDemo",title:"范围"}),{expose:[],setup(e){const l=m([25,55]);return(e,a)=>(y(),V("div",W,[x(O($),{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value=e)},null,8,["modelValue"])]))}})),C=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:k});const F={class:"md-example-child md-example-child-slider-0"};var I=i(u(o({},{name:"SliderDemo",title:"步长与格式化"}),{expose:[],setup(e){const l=m(20);return(e,a)=>(y(),V("div",F,[x(O($),{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value=e),step:5,format:e=>`￥${e}`},null,8,["modelValue","format"])]))}})),X=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:I});const q={class:"md-example-child md-example-child-slider-0"};var G=i(u(o({},{name:"SliderDemo",title:"边界值"}),{expose:[],setup(e){const l=m([10,80]);return(e,a)=>(y(),V("div",q,[x(O($),{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value=e),min:10,max:80},null,8,["modelValue"])]))}})),J=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:G});export{z as _,N as a,C as b,X as c,J as d};
