var e=Object.defineProperty,n=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(n,t,a)=>t in n?e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,i=(e,n)=>{for(var t in n||(n={}))o.call(n,t)&&s(e,t,n[t]);if(a)for(var t of a(n))l.call(n,t)&&s(e,t,n[t]);return e};import{g as c,n as r,J as u,s as d,m as p,E as h,x as m,h as y,r as b,a as f,c as v,f as x,d as S,i as g,k as C,l as T,t as k,F as w,j as O,U as M,e as V}from"./app.e8aebefe.js";import{p as H,t as P}from"./index.b83113be.js";import{c as B}from"./index.fb05993e.js";import{b as A}from"./index.2e1b29da.js";import{b as L}from"./index.ebd436b7.js";import{l as j}from"./index.c2bf84f6.js";import{t as D}from"./index.02bb6ec7.js";var _={visible:{type:Boolean,default:!1},title:{type:String,default:D("md.cashier.pay")},describe:{type:String,default:""},channels:{type:Array,default:()=>[]},channelLimit:{type:Number,default:2},defaultIndex:{type:Number,default:0},paymentTitle:{type:String,default:D("md.cashier.payCash")},paymentAmount:{type:String,default:"0.00"},paymentDescribe:{type:String,default:""},payButtonText:{type:String,default:D("md.cashier.confirmPay")},payButtonDisabled:{type:Boolean,default:!1},moreButtonText:{type:String,default:D("md.cashier.morePayWays")}},I={paymentTitle:{type:String,default:""},paymentAmount:{type:String,default:""},paymentDescribe:{type:String,default:""},moreButtonText:{type:String,default:""},payButtonText:{type:String,default:""},payButtonDisabled:{type:Boolean,default:!1},channels:{type:Array,default:""},channelLimit:{type:Number,default:0},modelValue:{type:[Number,String],default:""}},N=c({components:{MdIcon:r,MdRadioList:j,MdButton:L},props:I,emits:["pay","update:modelValue"],setup(e,n){const{innerValue:t,isSingle:a,currentIndex:o,isChannelShow:l,toggleShowAllChannel:s,channelPayClick:i,displayChannels:c}=((e,{emit:n})=>{const t=y({get:()=>e.modelValue,set:e=>n(M,e)}),a=y((()=>e.channelLimit<1||e.channels.length>e.channelLimit)),o=y((()=>e.channels.findIndex((n=>n.value===e.modelValue)))),l=d(!1),s=y((()=>l.value?e.channels:[e.channels[-1!==o.value?o.value:0]]));return{innerValue:t,isSingle:a,currentIndex:o,isChannelShow:l,toggleShowAllChannel:()=>{l.value=!l.value},channelPayClick:()=>{const t=e.channels[o.value];n("pay",t)},displayChannels:s}})(e,n);return{innerValue:t,isSingle:a,currentIndex:o,displayChannels:c,isChannelShow:l,toggleShowAllChannel:s,channelPayClick:i}}}),$={class:"md-cashier-channel"},U={class:"choose-text"},F={class:"choose-channel"},R={class:"choose-channel-list"},z={key:1,class:"item-image"},E={class:"md-cashier-block-btn"};N.render=function(e,n){const t=b("md-icon"),a=b("md-radio-list"),o=b("md-button");return f(),v(w,null,[x(" eslint-disable vue/no-v-html "),S("div",$,[S("div",U,[e.paymentTitle?(f(),v("p",{key:0,class:"choose-title",innerHTML:e.paymentTitle},null,8,["innerHTML"])):x("v-if",!0),e.paymentAmount?(f(),v("p",{key:1,class:"choose-number",innerHTML:e.paymentAmount},null,8,["innerHTML"])):x("v-if",!0),e.paymentDescribe?(f(),v("p",{key:2,class:"choose-describe",innerHTML:e.paymentDescribe},null,8,["innerHTML"])):x("v-if",!0)]),S("div",F,[g(e.$slots,"default"),S("div",R,[S(a,{modelValue:e.innerValue,"onUpdate:modelValue":n[1]||(n[1]=n=>e.innerValue=n),options:e.isSingle?e.displayChannels:e.channels,"icon-position":"right"},{left:C((({option:e})=>[e.icon?(f(),v(t,{key:0,name:e.icon,size:"lg"},null,8,["name"])):e.img?(f(),v("div",z,[S("img",{src:e.img},null,8,["src"])])):x("v-if",!0)])),_:1},8,["modelValue","options"])]),e.isSingle?(f(),v("div",{key:0,class:["choose-channel-more",[e.isChannelShow?"active":""]],onClick:n[2]||(n[2]=(...n)=>e.toggleShowAllChannel&&e.toggleShowAllChannel(...n)),innerHTML:e.moreButtonText},null,10,["innerHTML"])):x("v-if",!0)]),S("div",E,[S(o,{class:"md-cashier-pay-button",type:e.payButtonDisabled?"disabled":"primary",onClick:e.channelPayClick},{default:C((()=>[g(e.$slots,"button",{},(()=>[T(k(e.payButtonText),1)]))])),_:3},8,["type","onClick"])])])],2112)};var Q=N,J=c({name:"MdCashierChannelButton",components:{[L.name]:L},props:{actions:{type:Array,default:()=>[]}}}),W={class:"md-cashier-block-btn"};J.render=function(e,n){const t=b("md-button");return f(),v("div",W,[x(" eslint-disable vue/no-v-html"),(f(!0),v(w,null,O(e.actions,((n,a)=>(f(),v(t,{key:a,type:a===e.actions.length-1?"primary":"default",inline:e.actions.length>1,onClick:()=>{n.handler&&n.handler()},innerHTML:n.buttonText},null,8,["type","inline","onClick","innerHTML"])))),128))])};var q=c({name:"MdCashier",components:{MdPopup:H,MdPopupTitleBar:P,MdCashierChannel:Q,MdIcon:r,MdCaptcha:B,MdActivityIndicatorSuccess:A,MdCashierChannelButton:J},props:_,emits:["pay","hide","update:visible","show","select"],setup(e,n){const{popupShow:t,onShow:a,onHide:o,hide:l,scene:s,sceneOption:c,currentPayChannelValue:r,payHandler:y,next:b}=((e,{emit:n})=>{const{popupShow:t,onShow:a,onHide:o,hide:l}=u(e,n),s=d("choose"),c=p({loading:{text:D("md.cashier.payResultSearch")},success:{text:D("md.cashier.paySuccess"),buttonText:D("md.cashier.confirm"),handler:null},fail:{text:D("md.cashier.payFail"),buttonText:D("md.cashier.confirm"),handler:null},captcha:{text:"",brief:"",maxlength:4,count:60,autoCountdown:!0,onSend:h,onSubmit:h,countNormalText:"",countActiveText:""}}),r=d(e.channels[0].value);return m(r,(e=>{n("select",e)})),{popupShow:t,onShow:a,onHide:o,hide:l,scene:s,sceneOption:c,currentPayChannelValue:r,payHandler:()=>{n("pay",r)},next:(e,n={})=>{s.value=e,c[s.value]=i(i({},c[s.value]),n)}}})(e,n);return{popupShow:t,onShow:a,onHide:o,hide:l,scene:s,sceneOption:c,currentPayChannelValue:r,payHandler:y,next:b}}}),G={class:"md-cashier-container"},K={key:0,class:"md-cashier-block md-cashier-choose"},X={class:"md-cashier-block md-cashier-captcha"},Y={class:"md-cashier-block-icon"},Z={class:"md-cashier-block-text"},ee={class:"md-cashier-block md-cashier-fail"},ne={class:"md-cashier-block-icon"},te={class:"md-cashier-block md-cashier-custom"};q.render=function(e,n){const t=b("md-popup-title-bar"),a=b("md-cashier-channel"),o=b("md-captcha"),l=b("md-activity-indicator-success"),s=b("md-cashier-channel-button"),i=b("md-icon"),c=b("md-popup");return f(),v(c,{modelValue:e.popupShow,"onUpdate:modelValue":n[2]||(n[2]=n=>e.popupShow=n),class:"md-cashier",position:"bottom","mask-closable":!1,"prevent-scroll":!0,"prevent-scroll-exclude":".md-cashier-container",onHide:e.onHide,onShow:e.onShow},{default:C((()=>[S(t,{title:e.title,describe:e.describe,"only-close":"",onCancel:e.hide},null,8,["title","describe","onCancel"]),S("div",G,[g(e.$slots,"header",{scene:e.scene}),x(" Choose pay channel "),"choose"===e.scene?(f(),v("div",K,[S(a,{modelValue:e.currentPayChannelValue,"onUpdate:modelValue":n[1]||(n[1]=n=>e.currentPayChannelValue=n),"payment-title":e.paymentTitle,"payment-amount":e.paymentAmount,"payment-describe":e.paymentDescribe,"more-button-text":e.moreButtonText,"pay-button-text":e.payButtonText,"pay-button-disabled":e.payButtonDisabled,channels:e.channels,"channel-limit":e.channelLimit,onPay:e.payHandler},null,8,["modelValue","payment-title","payment-amount","payment-describe","more-button-text","pay-button-text","pay-button-disabled","channels","channel-limit","onPay"])])):"captcha"===e.scene?(f(),v(w,{key:1},[x(" Captcha "),S("div",X,[S(o,{ref:"captcha",maxlength:e.sceneOption.captcha.maxlength,count:e.sceneOption.captcha.count,"count-normal-text":e.sceneOption.captcha.countNormalText,"count-active-text":e.sceneOption.captcha.countActiveText,"auto-countdown":e.sceneOption.captcha.autoCountdown,brief:e.sceneOption.captcha.brief,"is-view":"",onSend:e.sceneOption.captcha.onSend,onSubmit:e.sceneOption.captcha.onSubmit},{default:C((()=>[S("div",{textContent:k(e.sceneOption.captcha.text)},null,8,["textContent"])])),_:1},8,["maxlength","count","count-normal-text","count-active-text","auto-countdown","brief","onSend","onSubmit"])])],2112)):"loading"===e.scene||"success"===e.scene?(f(),v(w,{key:2},[x(" Loaing, Success "),S("div",{class:["md-cashier-block",{"md-cashier-loading":"loading"===e.scene,"md-cashier-success":"success"===e.scene}]},[S("div",Y,[S(l,{ref:"rolling","is-success":"success"===e.scene},null,8,["is-success"])]),S("div",Z,k("success"===e.scene?e.sceneOption.success.text:e.sceneOption.loading.text),1),"success"===e.scene?(f(),v(s,{key:0,actions:e.sceneOption.success.actions||[{buttonText:e.sceneOption.success.buttonText,handler:e.sceneOption.success.handler}]},null,8,["actions"])):x("v-if",!0)],2)],2112)):"fail"===e.scene?(f(),v(w,{key:3},[x(" Fail "),S("div",ee,[S("div",ne,[S(i,{name:"warn-color"})]),S("div",{class:"md-cashier-block-text",textContent:k(e.sceneOption.fail.text)},null,8,["textContent"]),S(s,{actions:e.sceneOption.fail.actions||[{buttonText:e.sceneOption.fail.buttonText,handler:e.sceneOption.fail.handler}]},null,8,["actions"])])],2112)):"custom"===e.scene?(f(),v(w,{key:4},[x(" Custom "),S("div",te,[g(e.$slots,"scene")])],2112)):x("v-if",!0),g(e.$slots,"footer",{scene:e.scene})])])),_:3},8,["modelValue","onHide","onShow"])};var ae=q;ae.install=e=>{e.component(ae.name,ae)};var oe=ae;const le=T("唤起收银台");var se,ie=c((se=i({},{name:"CashierDemo",title:"基本"}),n(se,t({expose:[],setup(e){const n=d(!1),t=d([{icon:"cashier-icon-1",text:"招商银行(0056)",value:"001"},{icon:"cashier-icon-2",text:"支付宝支付",value:"002"},{icon:"cashier-icon-3",text:"微信支付",value:"003"},{icon:"cashier-icon-4",text:"QQ钱包支付",value:"004"},{icon:"cashier-icon-5",text:"一网通支付",value:"005"}]),a=d(null),o=()=>{console.log(a.value),a.value.next("captcha",{text:"Verification code sent to 156 **** 8965",brief:"The latest verification code is still valid",autoCountdown:!1,countNormalText:"Send Verification code",countActiveText:"Retransmission after {$1}s",onSend:e=>{console.log("[Mand Mobile] Send Captcha"),e()},onSubmit:e=>{console.log(`[Mand Mobile] Send Submit ${e}`),a.value.next("loading"),setTimeout((()=>{a.value.next("success")}),2e3)}})};return(e,l)=>(f(),v(w,null,[S(V(L),{onClick:l[1]||(l[1]=e=>n.value=!n.value)},{default:C((()=>[le])),_:1}),S(V(oe),{ref:a,visible:n.value,"onUpdate:visible":l[2]||(l[2]=e=>n.value=e),class:"md-cashier-demo",channels:t.value,"channel-limit":2,"payment-amount":"100.00","payment-describe":"关于支付金额的特殊说明",onPay:o},null,8,["visible","channels"])],64))}})))),ce=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ie});export{ce as _};
