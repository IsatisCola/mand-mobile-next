var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;import{g as n,n as o,ap as d,aq as c,G as m,s as u,V as p,x as f,r as v,a as g,c as w,f as b,d as y,F as h,j as I,k as x,i as k,t as V,e as j}from"./app.1ee411a5.js";import{s as C}from"./index.730b050c.js";import{t as O}from"./index.19e95ea9.js";import{t as _}from"./index.b3f47492.js";var S={visible:{type:Boolean,default:!1},list:{type:Array,default:()=>[]},defaultIndex:{type:Number,default:0},hasDots:{type:Boolean,default:!0},deletable:{type:Boolean,default:!1}},U=n({name:"MdImageViewer",components:{MdSwiper:C,MdTag:O,MdIcon:o,MdTransition:_},props:S,emits:[d,c,m],setup(e,a){const{currentImgIndex:t,isViewerShow:s,dataList:r,closeViewer:i,showViewer:l,afterChange:n,onDeleteImage:o}=((e,{emit:a})=>{const t=u(0),s=u(!1),r=u([]);return p((()=>{s.value=e.visible})),p((()=>{r.value=(e=>{const a=[];return e.map((e=>{const t="object"==typeof e?e:{dataUrl:e};a.push(t)})),a})(e.list)})),f((()=>e.defaultIndex),((e,a)=>{t.value=e})),{currentImgIndex:t,isViewerShow:s,dataList:r,onDeleteImage:e=>{r.value.splice(e,1),a(d,r),a(c,e)},showViewer:e=>{s.value=!0,t.value=e,a(m,!0)},closeViewer:()=>{s.value=!1,a(m,!1)},afterChange:(e,a)=>{t.value=a}}})(e,a);return{currentImgIndex:t,isViewerShow:s,dataList:r,onDeleteImage:o,closeViewer:i,showViewer:l,afterChange:n}}}),D={class:"md-image-viewer-box"},P={class:"md-image-list"},L={class:"md-swipper-warp"},M={class:"item"},A={key:0,class:"md-viewer-index"};U.render=function(e,a){const t=v("md-icon"),s=v("md-tag"),r=v("md-swiper"),i=v("md-transition");return g(),w("div",D,[b(" list "),y("div",P,[(g(!0),w(h,null,I(e.dataList,((a,r)=>(g(),w("div",{key:r,class:"md-image-item preview",style:{backgroundImage:`url(${a.dataUrl})`,backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},onClick:a=>e.showViewer(r)},[e.deletable?(g(),w(s,{key:0,class:"md-image-item-del",size:"small",shape:"quarter","fill-color":"#111A34",type:"fill","font-color":"#fff",onClick:a=>e.onDeleteImage(r)},{default:x((()=>[y(t,{name:"close"})])),_:2},1032,["onClick"])):b("v-if",!0)],12,["onClick"])))),128)),k(e.$slots,"default")]),b("swipper"),y(i,{name:"md-fade"},{default:x((()=>[e.isViewerShow?(g(),w("div",{key:0,class:"md-image-viewer",onClick:a[1]||(a[1]=(...a)=>e.closeViewer&&e.closeViewer(...a))},[y("div",L,[y(r,{ref:"swiper",autoplay:0,"default-index":e.currentImgIndex,"has-dots":!1,"is-prevent":!1,onAfterChange:e.afterChange},{default:x((()=>[(g(!0),w(h,null,I(e.dataList,((e,a)=>(g(),w("div",{key:a,class:"md-viewer-item"},[y("div",M,[e.dataUrl?(g(),w("img",{key:0,src:e.dataUrl,alt:e.dataUrl},null,8,["src","alt"])):b("v-if",!0)])])))),128))])),_:1},8,["default-index","onAfterChange"]),e.hasDots?(g(),w("div",A,V(e.currentImgIndex+1)+"/"+V(e.dataList.length),1)):b("v-if",!0)])])):b("v-if",!0)])),_:1})])};var z=U;z.install=e=>{e.component(z.name,z)};var B=z;var T,q=n((T=((e,a)=>{for(var t in a||(a={}))r.call(a,t)&&l(e,t,a[t]);if(s)for(var t of s(a))i.call(a,t)&&l(e,t,a[t]);return e})({},{name:"ImageViewerDemo",title:"基本"}),a(T,t({expose:[],setup(e){const a=u([{dataUrl:"//img-hxy021.didistatic.com/static/strategymis/insurancePlatform_spu/uploads/27fb7f097ca218d743f816836bc7ea4a"},{dataUrl:"//manhattan.didistatic.com/static/manhattan/insurancePlatform_spu/uploads/c2912793a222eb24b606a582fd849ab7"}]),t=u(!1);return(e,s)=>(g(),w("div",null,[y(j(B),{list:a.value,"onUpdate:list":s[1]||(s[1]=e=>a.value=e),visible:t.value,"onUpdate:visible":s[2]||(s[2]=e=>t.value=e),"default-index":1},null,8,["list","visible"])]))}})))),$=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:q});export{$ as _};
